# 청라 건물 KML 파일 최적화 보고서

## 🔍 문제 진단

### 발견된 문제점
1. **`extrude=1` 옵션이 모든 건물(9,374개)에 적용됨**
   - `extrude=1`은 건물 Polygon을 지면에서 높이까지 3D로 "압출(extrude)"하는 옵션
   - 이로 인해 건물의 **측면(벽면)과 선이 모두 렌더링**됨
   - 지붕만 필요한 경우 불필요한 기하학 데이터 생성

2. **과도한 좌표 정밀도**
   - 좌표가 소수점 10자리 이상으로 저장됨 (예: `126.6334882019707`)
   - GPS 정확도를 고려하면 소수점 6자리(약 10cm 정확도)면 충분
   - 불필요한 정밀도가 파일 크기 증가

3. **영향**
   - 파일 크기 증가 (6.5MB)
   - 렌더링 부하 증가 → 렉 발생
   - 불필요한 시각적 요소 표시

## ✅ 해결 방법

### 1단계: extrude 제거 (기본 수정)
```xml
<!-- 원본 (3D 입체) -->
<Polygon>
  <extrude>1</extrude>  ← 이것이 측면을 생성함
  <altitudeMode>relativeToGround</altitudeMode>
  ...
</Polygon>

<!-- 수정 (지붕만 표시) -->
<Polygon>
  <altitudeMode>relativeToGround</altitudeMode>
  ...
</Polygon>
```

**결과:**
- `cheongna_buildings_5km_fixed.kml`: 6.2MB (4% 감소)
- 건물 지붕만 표시되고 측면/선 제거됨

### 2단계: 좌표 정밀도 최적화 (권장)
```xml
<!-- 원본 좌표 (과도한 정밀도) -->
126.6334882019707,37.53316986669062,448

<!-- 최적화 좌표 (소수점 6자리) -->
126.633488,37.533170,448.0
```

**결과:**
- `cheongna_buildings_5km_optimized.kml`: 5.3MB (18.5% 감소)
- 시각적 차이 없음 (10cm 정확도 유지)
- 렌더링 성능 향상

## 📊 파일 비교

| 파일명 | 크기 | 감소율 | 특징 |
|--------|------|--------|------|
| `cheongna_buildings_5km.kml` (원본) | 6.5MB | - | 3D 입체 + 과도한 정밀도 |
| `cheongna_buildings_5km_fixed.kml` | 6.2MB | 4% | extrude만 제거 |
| `cheongna_buildings_5km_optimized.kml` | 5.3MB | 18.5% | extrude 제거 + 좌표 최적화 ⭐ |

## 🎯 권장 사항

**`cheongna_buildings_5km_optimized.kml` 사용을 권장합니다.**

### 이유:
✅ 18.5% 용량 감소 (6.5MB → 5.3MB)  
✅ 건물 지붕만 표시 (측면/선 제거)  
✅ 렌더링 성능 향상  
✅ 시각적 품질 유지 (10cm 정확도)  

### 시각적 차이:
- **원본**: 건물이 3D 입체로 표시 (지붕 + 측면 + 테두리)
- **최적화**: 건물 지붕(상단면)만 표시

## 🔧 추가 최적화 옵션

더 많은 용량 감소가 필요하다면:

1. **높이 필터링**: 특정 높이 이상/이하 건물만 포함
2. **영역 필터링**: 관심 지역만 추출
3. **좌표 단순화**: 복잡한 건물 윤곽선을 단순화
4. **스타일 최적화**: 중복 스타일 제거

필요하시면 추가 최적화를 진행해드리겠습니다!
